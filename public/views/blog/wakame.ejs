<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>わかめ</title>
  <link rel="stylesheet" href="/css/wakameblog.css">
</head>
<body>
  <header>
    <div class="container">
      <h1>わかめから情報を取得してみよう</h1>
      <p>海藻を回想してみて下さい。それは快走を生みます。</p>
    </div>
  </header>

  <nav>
    <div class="container">
      <ul>
        <li><a href="/">ホーム</a></li>
        <li><a href="#endpoint">エンドポイント</a></li>
        <li><a href="#request">リクエスト方法</a></li>
        <li><a href="#code-sample">サンプルコード</a></li>
      </ul>
    </div>
  </nav>

  <main>
    <div class="container">
      <h2>
        停止
      </h2>
      <p>
        パワーアップして再開しました。
      </p>
      <h2>YouTubeの動画情報を取得しよう！</h2>
      <p>
        お久しぶりです。「<a href="/blog/わかめ">和布</a>」です。わかめの漢字って、むちゃくちゃ良くないですか！？かっこいい感じもあるし、かわいい感じもある
        素晴らしい名前だと思ってます。<br>
        と、言うことで。今回は「YouTube動画の情報を取得してみよう」のコーナー。<br>
        具体的には、ストリームURL、タイトル、概要、再生回数、チャンネルの画像、チャンネルの名前などが取得できます。
        このストリームURLをvideoタグにぶち込むことで、みんな大好きなYouTubeを見ることもできます😎<br>
        あまり遅延はしないとは思いますが、やり過ぎるとストリームURLの取得で遅延が発生する場合があります。
      </p>
      <section id="endpoint">
        <h2>1. APIのエンドポイント</h2>
        <p>リクエストを送る際のURLはこれです。loginの後ろに動画IDを付けてください：</p>
        <div class="code-block">
          <code>https://wakame02m.glitch.me/api/login</code>
        </div>
      </section>

      <section id="request">
        <h2>2. 方法</h2>
        <p>リクエストは <code>POST</code> メソッドで行います。動画の情報をJSON形式で返します。</p>
      </section>

      <section id="code-sample">
        <h2>3. サンプルコード(Node.js)</h2>
        <p>axiosを使って、Node.jsでリクエストを送信できます。python信者の方は勝手にやって下さい：</p>
        <div class="code-block">
          <pre><code>
const axios = require('axios');

async function wakame(videoId) {
  const url = `https://wakame02m.glitch.me/api/login/${videoId}`;

  try {
    const response = await axios.post(url);
    console.log(response.data);  // 取得したデータをログに書き込む
  } catch (error) {
    console.error('エラーが発生しました:', error);
  }
}

const videoId = 'f6TytcA47rI';  // 動画のIDをここで指定
wakame(videoId);
          </code></pre>
        </div>
        <p>videoIdに、YouTube動画のIDを入れて実行して下さい。axiosでpostを送り、引っ張って来たデータをログに書き殴ります。<br>
          個々のデータを使いたい場合、下のように変数にデータを入れてあげて下さい</p>
        <div class="code-block">
          <pre><code>
const videoTitle = response.data['video-title'];
          </code></pre>
        </div>
      </section>
  <h2>
    まとめ
      </h2>
    <p>
      上のURLにaxiosかなんかでpost送ったら動画の情報が返ってきます。以上です
      </p>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; わかめ02 / 2024.09.09</p>
    </div>
  </footer>
</body>
</html>
